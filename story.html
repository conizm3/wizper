<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Wizper - Story Briefing</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Lato:wght@300;400&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Lato', sans-serif;
            background-color: #111;
            color: #f9f9f7;
            -webkit-tap-highlight-color: transparent;
            margin: 0;
            overflow: hidden;
        }
        h1, h2, .font-serif {
            font-family: 'Cinzel', serif;
        }
        .font-script {
            font-family: 'Playfair Display', serif;
            font-style: italic;
        }

        /* --- フェードイン演出 --- */
        @keyframes fadeInUpSlow {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in-text {
            opacity: 0;
            animation: fadeInUpSlow 2s ease-out forwards;
        }

        /* --- ラインアニメーション --- */
        @keyframes expandLine {
            from { width: 0; opacity: 0; }
            to { width: 40px; opacity: 0.5; }
        }
        .anim-line {
            width: 0;
            height: 1px;
            background-color: white;
            animation: expandLine 1.5s ease-out forwards;
        }

        /* --- スタートボタン（呼吸するような光） --- */
        @keyframes breathe {
            0%, 100% { border-color: rgba(255,255,255,0.2); background: rgba(255,255,255,0.02); }
            50% { border-color: rgba(255,255,255,0.5); background: rgba(255,255,255,0.08); }
        }
        .start-btn {
            animation: breathe 4s infinite ease-in-out;
            transition: all 0.3s ease;
        }
        .start-btn:active {
            transform: scale(0.95);
            background: rgba(255,255,255,0.1);
        }

    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // データ例
        const STORY_DATA = {
            chapterId: "I",
            title: "The Master's Desk",
            lines: [
                "Ah, there you are, apprentice.",
                "My desk is in utter chaos again...",
                "I need to finish this spell before the moon rises.",
                "Be my eyes, will you?"
            ],
            mission: "- Find 5 hidden items -"
        };

        const StoryScreen = () => {
            const [visibleLines, setVisibleLines] = useState(0);
            const [showButton, setShowButton] = useState(false);

            useEffect(() => {
                const timers = STORY_DATA.lines.map((_, index) => {
                    return setTimeout(() => {
                        setVisibleLines(prev => prev + 1);
                    }, 800 * (index + 1) + 500); 
                });

                const btnTimer = setTimeout(() => {
                    setShowButton(true);
                }, 800 * (STORY_DATA.lines.length + 1) + 500);

                return () => {
                    timers.forEach(clearTimeout);
                    clearTimeout(btnTimer);
                };
            }, []);

            const handleStart = () => {
                document.body.style.transition = "opacity 1s";
                document.body.style.opacity = 0;
                setTimeout(() => {
                    console.log("Navigating to Game...");
                    // window.location.href = "index.html"; 
                }, 1000);
            };

            return (
                <div className="relative w-full h-[100dvh] flex flex-col items-center justify-center px-8 py-12">
                    
                    {/* Chapter Title */}
                    <div className="absolute top-16 text-center fade-in-text" style={{animationDelay: '0.2s'}}>
                        <p className="text-[10px] tracking-[0.3em] text-gray-500 uppercase mb-2">Chapter {STORY_DATA.chapterId}</p>
                        <h1 className="text-2xl font-serif text-gray-300 tracking-widest">{STORY_DATA.title}</h1>
                        <div className="anim-line mx-auto mt-6" style={{animationDelay: '0.5s'}}></div>
                    </div>

                    {/* Story Text Area */}
                    <div className="flex flex-col gap-6 text-center max-w-md">
                        {STORY_DATA.lines.map((line, index) => (
                            <p 
                                key={index}
                                className={`font-script text-lg text-[#f9f9f7] leading-relaxed transition-all duration-1000 transform
                                    ${index < visibleLines ? 'opacity-80 translate-y-0' : 'opacity-0 translate-y-4'}`}
                            >
                                "{line}"
                            </p>
                        ))}
                    </div>

                    {/* Start Action */}
                    {/* bottom-20 -> bottom-16 に変更して少し下げ、中央のテキストとの距離を確保 */}
                    <div className={`absolute bottom-16 transition-all duration-1000 ${showButton ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'}`}>
                        <div className="text-center mb-8">
                            {/* OBJECTIVEラベルを削除し、ミッションテキストのみ表示 */}
                            <p className="text-xs font-serif tracking-widest text-gray-400 opacity-80">{STORY_DATA.mission}</p>
                        </div>
                        
                        <button 
                            onClick={handleStart}
                            className="start-btn w-64 py-4 border border-white/20 text-sm tracking-[0.2em] uppercase font-serif text-white cursor-pointer"
                        >
                            Begin Search
                        </button>
                    </div>

                    {/* Background Texture */}
                    <div className="absolute inset-0 pointer-events-none opacity-20" 
                         style={{backgroundImage: 'url("https://www.transparenttextures.com/patterns/stardust.png")'}}>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<StoryScreen />);
    </script>
</body>
</html>
